- const tags = {}
- const montegasppa = "Reflexões…"
- const kodumaro = public.kodumaro.blog.title

each yearDir, yearSlug in public.montegasppa
  if yearDir && /^\d{4}$/.test(yearSlug)
    each monthDir, monthSlug in yearDir
      if monthDir && /^\d\d$/.test(monthSlug)
        each page, slug in monthDir
          - const url = `montegasppa/${yearSlug}/${monthSlug}/${slug}.html`
          - const title = `${montegasppa} :: ${page.title}`
          - const current = {url, title}
          each tag in page.tags
            if tags[tag]
              - tags[tag].pages.push(current)
            else
              - tags[tag] = {name: tag, pages: [current]}

each yearDir, yearSlug in public.kodumaro
  if yearDir && /^\d{4}$/.test(yearSlug)
    each monthDir, monthSlug in yearDir
      if monthDir && /^\d\d$/.test(monthSlug)
        each page, slug in monthDir
          - const url = `kodumaro/${yearSlug}/${monthSlug}/${slug}.html`
          - const title = `${kodumaro} :: ${page.title}`
          - const current = {url, title}
          each tag in page.tags
            if tags[tag]
              - tags[tag].pages.push(current)
            else
              - tags[tag] = {name: tag, pages: [current]}

.col-md-4
  .list-group
    h3(class=["mg-title", "list-group-item", "active"]): em Tags
    ul.list-group
      each tagName in Object.keys(tags).sort()
        - const tag = tags[tagName]
        li.list-group-item
          select.list-group-item(
            onchange="window.location = this.value; return true;"
            style={width: "100%"}
          )
            option(selected=true)!= tag.name
            each page in tag.pages
              option(value=page.url)!= page.title
