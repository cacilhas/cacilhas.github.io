<!DOCTYPE html><html lang="pt"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatibile" content="IE=edge"/><meta http-equiv="Pragma" content="no-cache"/><meta http-equiv="Cache-Control" content="no-cache"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content=""/><meta name="author" content="ℜodrigo Arĥimedeς ℳontegasppα ℭacilhας"/><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Kavivanar"/><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto&amp;subset=latin-ext"/><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:i,bold&amp;subset=latin-ext"/><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="stylesheet" href="/css/bootstrap.min.css"/><link rel="stylesheet" href="/css/animate.min.css"/><link rel="stylesheet" href="/css/bootstrap-dropdownhover.min.css"/><link rel="stylesheet" href="/css/ie10-viewport-bug-workaround.css"/><link rel="stylesheet" href="/css/bootstrap-theme.min.css"/><link rel="stylesheet" href="/css/theme.css"/><link rel="stylesheet" href="/css/cacilhas.css"/><title>Kodumaro :: Sobre Golang</title><meta property="og:site_name" content="Kodumaro"/><meta property="og:title" content="Sobre Golang"/><meta property="og:url" content="https://cacilhas.info/kodumaro/2017/06/golang.html"/><meta property="og:type" content="article"/><meta property="article:tag" content="Golang, TDD"/><meta property="article:author" content="Arĥimedeς ℳontegasppα ℭacilhας"/><meta property="og:image" content="https://cacilhas.info/img/golang.jpg"/><link rel="alternate" type="application/atom+xml" title="Kodumaro" href="https://kodumaro.cacilhas.info/feed.xml"/><link rel="stylesheet" href="/css/kodumaro.css"/><link rel="icon" href="/img/icons/kodumaro.ico"/><script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script><script src="/js/ie-emulation-modes-warning.js"></script><script src="/js/jquery.min.js"></script><script src="/js/bootstrap-dropdownhover.min.js"></script><script src="/js/handle-old-url.js"></script><script src="/js/alt-title.js"></script><script src="/js/anchors.js"></script><script async="async" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(adsbygoogle = window.adsbygoogle || []).push({
  google_ad_client: "ca-pub-5741846017654057",
  enable_page_level_ads: true,
})
</script><script>(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date;a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,"script","https://www.google-analytics.com/analytics.js","ga")
ga("create", "UA-99357497-1", "auto")
ga("send", "pageview")</script></head><body><nav class="navbar navbar-inverse navbar-fixed-top"><div class="container"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-togge="collapse" data-target="#navbar" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="dropdown"><span class="navbar-brand dropdown-toggle" data-toggle="dropdown" data-hover="dropdown">ℭacilhας.INFO</span><ul class="dropdown-menu"><li><a href="https://cacilhas.info"><i class="glyphicon glyphicon-home"></i>&nbsp;ℭacilhας.INFO</a></li><li><a href="https://montegasppa.cacilhas.info/"><i class="licon icon-montegasppa"></i>&nbsp;Reflexões de ℳontegasppα e Giulia C.</a></li><li><a href="https://kodumaro.cacilhas.info/"><i class="licon icon-kodumaro"></i>&nbsp;Kodumaro</a></li><li><hr/></li><li><a href="https://www.educaedu-brasil.com/" target="_blank"><i class="licon icon-educaedu"></i>&nbsp;Educaedu Brasil</a></li><li><a href="https://hondaj.cacilhas.info/" target="_blank"><i class="licon icon-hondaj"></i>&nbsp;ĤøŅĐΔj̆₀</a></li><li><a href="https://vortaro.cacilhas.info/" target="_blank"><i class="glyphicon glyphicon-link"></i>&nbsp;Konsulta Vortaro</a></li><li><a href="https://claudiotorcato.wordpress.com/" target="_blank"><i class="licon icon-wordpress"></i>&nbsp;Mosaico Livre</a></li><li><a href="https://www.patreon.com/cacilhas" target="_blank"><i class="licon icon-patreon"></i>&nbsp;Prognose</a></li><li><a href="https://www.todasfridas.com.br/" target="_blank"><i class="licon icon-fridas"></i>&nbsp;Todas Fridas</a></li><li><a href="https://waltercruz.com/" target="_blank"><i class="glyphicon glyphicon-link"></i>&nbsp;Walter Cruz</a></li></ul></div></div><div class="collapse navbar-collapse" id="navbar"><ul class="nav navbar-nav"><li><a href="https://cacilhas.info/"><i class="glyphicon glyphicon-home"></i>&nbsp;
Início</a></li><li><a href="https://cacilhas.info/about.html">Sobre</a></li><li><a href="https://kodumaro.cacilhas.info/">Kodumaro</a></li><li class="active"><a href=".">Sobre Golang</a></li></ul></div></div></nav><div class="container"><div class="panel panel-default"><div class="panel-heading"><h2 class="mg-title">Kodumaro :: Sobre Golang</h2><h6 class="pull-right">Publicado em 12 de Junho, 2017</h6><h6>As sombras da programação.</h6></div><div class="panel-body"><img class="pull-right" src="/img/golang.jpg" alt="Golang"/><p class="mg-first">Recentemente começei a trabalhar em um projeto usando a linguagem <a href="https://golang.org/">Go</a> do Google. Minha intenção é expor aqui minhas impressões sobre a linguagem
 enquanto plataforma de desenvolvimento.</p><h3>Abordagem</h3><p>A primeira coisa que percebi é que abordei a linguagem inicialmente com uma visão equivocada. Olhei para Go do ponto de vista de <a href="https://www.python.org/">Python</a> e <a href="https://nodejs.org/">Node.js</a>. O resultado foi uma total decepção. Quando você tenta usar uma linguagem
 que oferece ferramentas mais poderosas no uso de recursos do sistema com
 mentalidade de linguagens poderosas no sentido de facilitar <a href="https://pt.wikipedia.org/wiki/Desenvolvimento_rápido_de_aplicações"><RAD></RAD></a> o resultado é <strong>frustração</strong>.</p><p>A partir do momento que chaveei meu pensamento para <a href="http://www.cplusplus.com/">C++</a> e <a href="https://www.gnu.org/software/gnustep/resources/documentation/Developer/Base/ProgrammingManual/manual_toc.html">Objective-C</a> tive uma epifania sobre Go: de repente ela se tornou um linguagem
 interessante, até divertida de programar.</p><p>Inclusive um amigo meu de muito boa vontade tentou me explicar ponteiros com analogias e relações <em>ro</em> vs <em>rw</em> – bastava dizer “são
 ponteiros“.</p><p>A única crítica que tenho nesse ponto a Go é que o Google poderia ter tentado menos reinventar a roda e aproveitado mais a sintaxe de C++, já amplamente
 experimentada e readaptada, como <a href="https://wiki.gnome.org/Projects/Vala">Vala</a> fez com <a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/">C#</a>. Teria atraído mais bons programadores devido a uma menor curva de
 aprendizado (apesar de <a href="https://lwn.net/Articles/249460/">Linus Torvalds discordar</a>).</p><h3>Interfaces</h3><p><a href="https://www.golang-book.com/books/intro/9">Interfaces</a> se parecem parte com interfaces de <a href="https://www.oracle.com/java/">Java</a> e parte com interfaces de Objective-C – na verdade <code>struct</code>s se
 parecem com interfaces de Objetive-C. Porém, ao contrário de Java, as
 interfaces de Go seguem a filosofia <a href="http://apprize.info/python/fluent/12.html"><em>goose typing</em></a>, que é um aprimoramento do <a href="https://pt.wikipedia.org/wiki/Duck_typing"><em>duck typing</em></a>.</p><p>Ou seja, se seu objeto implementa todos os métodos descritos pela interface, ele <strong>é de fato</strong> uma instância daquela interface.</p><p>Por exemplo:</p><pre class="prettyprint"><code>type Person interface {
  FirstName() string
  LastName() string
  FullName() string
  Birth() time.Time
}

type personType struct {
  firstName, lastName string
  birth time.Time
}

func NewPerson(firstName, lastName string, birth time.Time) Person {
  return personType{firstName, lastName, birth}
}

func (p personType) FirstName() string {
  return p.firstName
}

func (p personType) LastName() string {
  return p.lastName
}

func (p personType) FullName() string {
  return strings.Trim(fmt.Sprintf("%v %v", p.firstName, p.lastName), " ")
}

func (p personType) Birth() time.Time {
  return p.birth
}
</code></pre><p>No exemplo acima, instâncias da <code>struct</code> <code>personType</code> são automaticamente instâncias de <code>Person</code>, uma vez que
 <code>personType</code> implemente todos os métodos da interface, podendo ser
 retornadas por <code>NewPerson</code> como instâncias reais de <code>Person</code>.</p><h3>Testes unitários</h3><p>A biblioteca padrão de Go oferece recursos simples, porém poderosíssimos para testes unitários. Trata-se da <em>lib</em> <a href="https://golang.org/pkg/testing/"><code>testing</code></a>.</p><p>Por exemplo, para testarmos nossa <code>struct</code> (sendo bastante prolixo):</p><pre class="prettyprint"><code>func TestPerson(t *testing.T) {
  timeForm := "2000-01-31"
  birth, _ := time.Parse(timeForm, "2017-06-12")
  p := NewPerson("John", "Doe", birth)

  t.Run("primary methods", func(t *testing.T) {
    t.Run("#FirstName", func(t *test.T) {
      if got := p.FirstName(); got != "John" {
        t.Fatalf("expected John, got %v", got)
      }
    })

    t.Run("#LastName", func(t *test.T) {
      if got := p.LastName(); got != "Doe" {
        t.Fatalf("expected Doe, got %v", got)
      }
    })

    t.Run("#Birth", func(t *test.T) {
      expected, _ := time.Parse(timeForm, "2017-02-12")
      if got := p.Birth(); got != expected {
        t.Fatalf("expected %v, got %v", expected, got)
      }
    })
  })

  t.Run("secondary methods", func(t *test.T) {
    t.Run("#FullName", func(t *test.T) {
      if got := p.FullName(); got != "John Doe" {
        t.Fatalf("expected John Doe, got %v", got)
      }
    })
  })
}
</code></pre><p>Mais do que suficiente para os testes unitários do dia-a-dia.</p><h3>Tratamento de exceções</h3><p>A forma padrão de tratar exceções em Go é retornando a exceção como última resposta.</p><p>Por exemplo, você deve ter reparado no <code>_</code> na linha que cria a data de nascimento:</p><pre class="prettyprint"><code>birth, _ := time.Parse(timeForm, "2017-06-12")
</code></pre><p>O <code>_</code> diz para Go descartar o retorno daquela posição. Um código mais honesto seria:</p><pre class="prettyprint"><code>birth, err := time.Parse(timeForm, "2017-06-12")
if err != nil {
  // Faça alguma coisa com err
  ...
}
</code></pre><p>O segundo valor retornado é o erro, caso o <em>parsing</em> da data tenha falhado, ou <code>nil</code> se tudo deu certo e o objeto <code>time.Time</code> pode
 ser criado corretamente.</p><p>Porém há casos em que a exceção não pode ser tratada (ou não se deseja que seja). Nesses casos é levantado um <code>panic</code>, que é uma exceção
 destrutiva que derruba a <em>gorrotina</em> atual e cada uma que esteja
 conectada a ela.</p><p>A forma de tratar um <code>panic</code> é através de um <code>defer</code>.</p><p><code>defer</code> é um bloco de código (não uma função!) que é executado incondicionalmente na saída da função atual.</p><p>Dentro do bloco <code>defer</code> é possível chamar <code>recover()</code>, que para a propagação do <code>panic</code>. Se houver algum <code>panic</code> sendo propagado,
 sua exceção será retornada pelo <code>recover()</code>, caso não haja, será
 retornado <code>nil</code>.</p><p>Por exemplo:</p><pre class="prettyprint"><code>func DoSomethingDangerous(res chan<- error) {
  defer res <- recover()

  // Faz algo que possa levar a um panic
  ...
}
</code></pre><p>Podem ser registrados quantos <code>defer</code>s forem necessários.</p><h3>Conclusão</h3><p>Esta foi uma avaliação bem superficial da linguagem, não entrei em detalhes importantes, como <em>gorrotinas</em>, ponteiros, <code>chan</code>s,
 <code>sync.WaitGroup</code>s, <em>slices</em>, <em>loops</em>, etc. Fica para uma
 próxima.</p><p>Quem estiver interessado em aventurar-se no mundo do Go, recomendo o <a href="https://tour.golang.org/"><em>tour</em> pela linguagem</a>, o livro <a href="https://www.golang-book.com/books/intro"><An>Introdution to Programming in Go</An></a>,  <a href="https://blog.golang.org/">The Go Blog</a> e <a href="https://www.goinggo.net/">Going Go Programming</a>. Para experimentar a linguagem, há disponível <a href="https://play.golang.org/">The Go Playground</a>.</p></div></div><p class="text-right"><small class="tag"><a href="/tags/golang.html">Golang</a></small> | <small class="tag"><a href="/tags/tdd.html">TDD</a></small></p><div class="panel panel-default"><div class="panel-body"><div id="disqus_thread"></div><script language="javascript">var disqus_config = function() {
  this.page.url = `https://cacilhas.info/kodumaro/2017/06/golang.html`
  this.page.identifier = `kodumaro.2017.06.golang`
  this.page.title = 'Sobre Golang'
}</script><noscript>Por favor habilite o JavaScript para ver os <a href="https://disqus.com/?ref_noscript">comentários do Disqus</a>.</noscript></div></div><script async="async" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px;" data-ad-client="ca-pub-5741846017654057" data-ad-slot="7936078120"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({})</script><iframe src="https://open.spotify.com/follow/1/?uri=spotify:artist:17ztrEzLSzYOp8MySGqFHy&amp;size=detail&amp;theme=light" width="300" height="56" scrolling="no" frameboarder="0" style="border:none; overflow:hidden;" allowtransparency></iframe></div><div class="panel-footer" id="footer"><p class="pull-left"><a href="https://kodumaro.cacilhas.info/feed.xml" target="_blank" type="application/atom+xml"><img src="/img/rss.png" alt="feed"></a></p><p class="small">Autor: Arĥimedeς ℳontegasppα ℭacilhας &nbsp;<a rel="license" href="http://creativecommons.org/licenses/by/4.0/deed.pt"><img alt="[CC-BY 4.0]" src="https://i.creativecommons.org/l/by/4.0/80x15.png" style="border-width:0;"></a></p></div><script src="/js/bootstrap.min.js"></script><script src="/js/ie10-viewport-bug-workaround.js"></script><script src="/js/kodumaro.disqus.js"></script><script id="dsq-count-scr" src="//kodumaro.disqus.com/count.js" async></script><script language="javascript">$(document).ready(function() {
  $('[title]').tooltip();
})</script></body></html>